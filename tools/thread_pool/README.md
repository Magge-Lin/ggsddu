# 线程池
> thread_pool


## 编译
> ./build.sh

## 执行
> ./build/bin/main
> ./build/bin/test


## 目录结构
- src

```
1、基于 C 语言实现的库
        atomic.h
        spinlock.h
        thrd_pool.c
        thrd_pool.h

2、基于 C++11 线程安全的单例模式的线程池封装
        CThreadPool.h
        CThreadPool.cc
```

- test

```
简单测试：
main.c：
    打印1~1000数字，并且打印当前线程ID.

test.cc：
    对vector容器进行push和erase.
```

## Tips

> - 简单介绍一下线程池：
>   	线程池是一种并发编程的技术，它预先创建一组线程并维护一个任务队列。当有任务需要执行时，从任务队列中取出一个任务分配给空闲的线程进行处理。这样可以避免频繁地创建和销毁线程，提高应用程序的性能和资源利用率。
>
> - 平时使用线程池的时候遇到的一些问题：
>   1、线程池大小选择：根据系统资源和任务特点进行评估，可以通过监控系统负载和性能指标来确定合适的线程池大小。例如，使用htop工具分析CPU利用率、内存占用等指标，并根据实际需求进行调整。
>
>   2、任务提交方式：为了避免瞬时并发请求导致系统压力过大，我使用了限流机制或者设置任务队列的最大容量。可以基于业务需求进行限制，如设定每秒或每分钟最大处理请求数目，以及采用合适的调度策略。
>
>   3、异常处理：对于每个提交的任务，在其执行代码中使用try-catch块捕获异常，并进行合理的处理。可以记录日志、输出错误信息或者回滚相关操作，确保不会因为某个异常而导致整个线程池崩溃。此外，还可以使用回调函数等方式通知主程序出现异常情况。
>
>   4、线程安全：对于共享资源访问，采用适当的并发控制机制来保证线程安全。例如，在访问共享数据之前加锁（互斥锁、读写锁等），防止多个线程同时修改数据导致数据不一致问题。

